(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};this.DataTable=function(){function c(b,c){this.getLimitedPages=a(this.getLimitedPages,this),this.getPages=a(this.getPages,this);var d;if(c||(b instanceof Array?c={}:(c=b,b=[])),this.options={recordWord:c.recordWord||"record",recordWordPlural:c.recordWordPlural,sortDir:c.sortDir||"asc",sortField:c.sortField||void 0,perPage:c.perPage||15,paginationLimit:c.paginationLimit||10,filterFn:c.filterFn||void 0,alwaysMatch:c.alwaysMatch||!1,unsortedClass:c.unsortedClass||"",descSortClass:c.descSortClass||"",ascSortClass:c.ascSortClass||""},this.initObservables(),(d=c.serverSidePagination)&&d.enabled){if(!d.path||!d.loader)throw new Error("`path` or `loader` missing from `serverSidePagination` object");this.options.paginationPath=d.path,this.options.resultHandlerFn=d.loader,this.initWithServerSidePagination()}else this.initWithClientSidePagination(b)}var d,e;return e=ko.pureComputed||ko.computed,d=function(a,b){return null==b?null==a:null!=a?"boolean"==typeof a?a===b:a.toString().toLowerCase().indexOf(b.toString().toLowerCase())>=0||a===b:!1},c.prototype.initObservables=function(){return this.sortDir=ko.observable(this.options.sortDir),this.sortField=ko.observable(this.options.sortField),this.perPage=ko.observable(this.options.perPage),this.currentPageNumber=ko.observable(1),this.filter=ko.observable("").extend({rateLimit:{method:"notifyWhenChangesStop",timeout:400}}),this.loading=ko.observable(!1),this.rows=ko.observableArray([])},c.prototype.getPages=function(a){var b,c,d,e,f;for(e=this.perPage(),f=0,c=1,d=new Array(Math.ceil(a/e));a>f;)b={number:c,start:f,end:Math.min(a-1,f+e-1)},b.blanks=new Array(d.length>1?e-(b.end-b.start+1):0),d[c-1]=b,c++,f+=e;return d},c.prototype.getLimitedPages=function(){var a,b,c,d,e,f,g;return f=this.pages(),a=this.currentPageNumber(),e=this.options.paginationLimit,f.length<=e?f:(d=Math.floor(e/2),b=a-Math.floor(d),1>b?f.slice(0,e):(g=e%2===0?d-1:d,c=a+g,c>f.length?f.slice(f.length-e,f.length):f.slice(b-1,c)))},c.prototype.initWithClientSidePagination=function(a){var c,f;return this.filtering=ko.observable(!1),this.filter.subscribe(function(a){return function(){return a.currentPageNumber(1)}}(this)),this.perPage.subscribe(function(a){return function(){return a.currentPageNumber(1)}}(this)),this.rows(a),this.rowAttributeMap=e(function(b){return function(){var c,d,e;if(a=b.rows(),c={},a.length>0){e=a[0];for(d in e)e.hasOwnProperty(d)&&(c[d.toLowerCase()]=d)}return c}}(this)),c=ko.observable().extend({notify:"always"}),this.triggerFilterCalculation=function(a){return function(){return c.valueHasMutated(),a.currentPageNumber(1)}}(this),this.filteredRows=e(function(b){return function(){var d,e;return c(),b.filtering(!0),d=b.filter(),a=b.rows.slice(0),(b.options.alwaysMatch||""!==d)&&(e=b.filterFn(d),a=a.filter(e)),null!=b.sortField()&&""!==b.sortField()&&a.sort(function(a,c){var d,e;return d=ko.utils.unwrapObservable(a[b.sortField()]),e=ko.utils.unwrapObservable(c[b.sortField()]),"string"==typeof d&&(d=d.toLowerCase()),"string"==typeof e&&(e=e.toLowerCase()),"asc"===b.sortDir()?e>d||""===d||null==d?-1:d>e||""===e||null==e?1:0:e>d||""===d||null==d?1:d>e||""===e||null==e?-1:0}),b.filtering(!1),a}}(this)).extend({rateLimit:50,method:"notifyWhenChangesStop"}),this.pages=e(function(a){return function(){return a.getPages(a.filteredRows().length)}}(this)),this.limitedPages=e(function(a){return function(){return a.getLimitedPages()}}(this)),this.currentPage=e(function(a){return function(){return a.pages().length>0?a.pages()[a.currentPageNumber()-1]:{number:1,start:0,end:0,blanks:[]}}}(this)),this.pagedRows=e(function(a){return function(){return a.filteredRows().slice(a.currentPage().start,a.currentPage().end+1)}}(this)),this.leftPagerClass=e(function(a){return function(){return 1===a.currentPageNumber()?"disabled":void 0}}(this)),this.rightPagerClass=e(function(a){return function(){return a.currentPageNumber()===a.pages().length?"disabled":void 0}}(this)),this.total=e(function(a){return function(){return a.filteredRows().length}}(this)),this.from=e(function(a){return function(){return a.currentPage().start+1}}(this)),this.to=e(function(a){return function(){return a.currentPage().end+1}}(this)),this.recordsText=e(function(a){return function(){var b,c,d,e,f;return b=a.from(),e=a.to(),f=a.total(),c=a.options.recordWord,d=a.options.recordWordPlural||c+"s",a.pages().length>1?""+b+" to "+e+" of "+f+" "+d:""+f+" "+(f>1||0===f?d:c)}}(this)),this.showNoData=e(function(a){return function(){return 0===a.pagedRows().length&&!a.loading()}}(this)),this.showLoading=e(function(a){return function(){return a.loading()}}(this)),this.sortClass=function(a){return function(b){return e(function(){return a.sortField()===b?"sorted "+("asc"===a.sortDir()?a.options.ascSortClass:a.options.descSortClass):a.options.unsortedClass})}}(this),this.addRecord=function(a){return function(b){return a.rows.push(b)}}(this),this.removeRecord=function(a){return function(b){return a.rows.remove(b),0===a.pagedRows().length?a.prevPage():void 0}}(this),this.replaceRows=function(a){return function(b){return a.rows(b),a.currentPageNumber(1),a.filter(void 0)}}(this),f=function(a,b,c){var e,f;return function(){var a;a=[];for(e in c)f=c[e],a.push(f);return a}().some(function(c){return d(ko.isObservable(b[c])?b[c]():b[c],a)})},this.filterFn=this.options.filterFn||function(a){return function(c){var e,g,h;return h=[[],{}],e=h[0],g=h[1],c.split(" ").forEach(function(a){var b;return a.indexOf(":")>=0?(b=a.split(":"),g[b[0]]=function(){switch(b[1].toLowerCase()){case"yes":case"true":return!0;case"no":case"false":return!1;case"blank":case"none":case"null":case"undefined":return void 0;default:return b[1].toLowerCase()}}()):e.push(a)}),e=e.join(" "),function(c){var h,i,j;return h=function(){var a;a=[];for(i in g)j=g[i],a.push(function(a){return function(b,e){var f;return(f=a.rowAttributeMap()[b.toLowerCase()])?d(ko.isObservable(c[f])?c[f]():c[f],e):!1}}(this)(i,j));return a}.call(a),b.call(h,!1)<0&&(a.options.alwaysMatch||""!==e?null!=c.match?c.match(e):f(e,c,a.rowAttributeMap()):!0)}}}(this)},c.prototype.initWithServerSidePagination=function(){var a,b;return b=function(a){return function(b,c){var d,e,f,g;return f=""+a.options.paginationPath+"?"+function(){var a;a=[];for(d in b)g=b[d],a.push(""+encodeURIComponent(d)+"="+encodeURIComponent(g));return a}().join("&"),e=new XMLHttpRequest,e.open("GET",f,!0),e.setRequestHeader("Content-Type","application/json"),e.onload=function(){return e.status>=200&&e.status<400?c(null,JSON.parse(e.responseText)):c(new Error("Error communicating with server"))},e.onerror=function(){return c(new Error("Error communicating with server"))},e.send()}}(this),a=function(a,b,c,d,e){var f;return f={perPage:a,page:b},null!=c&&""!==c&&(f.filter=c),null!=d&&""!==d&&null!=e&&""!==e&&(f.sortDir=d,f.sortBy=e),f},this.filtering=ko.observable(!1),this.pagedRows=ko.observableArray([]),this.numFilteredRows=ko.observable(0),this.filter.subscribe(function(a){return function(){return a.currentPageNumber(1)}}(this)),this.perPage.subscribe(function(a){return function(){return a.currentPageNumber(1)}}(this)),ko.computed(function(c){return function(){var d;return c.loading(!0),c.filtering(!0),d=a(c.perPage(),c.currentPageNumber(),c.filter(),c.sortDir(),c.sortField()),b(d,function(a,b){var d,e;return c.loading(!1),c.filtering(!1),a?console.log(a):(e=b.total,d=b.results,c.numFilteredRows(e),c.pagedRows(d.map(c.options.resultHandlerFn)))})}}(this)).extend({rateLimit:500,method:"notifyWhenChangesStop"}),this.pages=e(function(a){return function(){return a.getPages(a.numFilteredRows())}}(this)),this.limitedPages=e(function(a){return function(){return a.getLimitedPages()}}(this)),this.currentPage=e(function(a){return function(){return a.pages()[a.currentPageNumber()-1]}}(this)),this.pagedRows=e(function(a){return function(){return a.filteredRows().slice(a.currentPage().start,a.currentPage().end+1)}}(this)),this.leftPagerClass=e(function(a){return function(){return 1===a.currentPageNumber()?"disabled":void 0}}(this)),this.rightPagerClass=e(function(a){return function(){return a.currentPageNumber()===a.pages().length?"disabled":void 0}}(this)),this.from=e(function(a){return function(){return a.currentPage().start+1}}(this)),this.to=e(function(a){return function(){return a.currentPage().end+1}}(this)),this.recordsText=e(function(a){return function(){var b,c,d,e,f;return f=a.numFilteredRows(),b=a.from(),e=a.to(),c=a.options.recordWord,d=a.options.recordWordPlural||c+"s",a.pages().length>1?""+b+" to "+e+" of "+f+" "+d:""+f+" "+(f>1||0===f?d:c)}}(this)),this.showNoData=e(function(a){return function(){return 0===a.pagedRows().length&&!a.loading()}}(this)),this.showLoading=e(function(a){return function(){return a.loading()}}(this)),this.sortClass=function(a){return function(b){return e(function(){return a.sortField()===b?"sorted "+("asc"===a.sortDir()?a.options.ascSortClass:a.options.descSortClass):a.options.unsortedClass})}}(this),this.addRecord=function(){throw new Error("#addRecord() not applicable with serverSidePagination enabled")},this.removeRecord=function(){throw new Error("#removeRecord() not applicable with serverSidePagination enabled")},this.replaceRows=function(){throw new Error("#replaceRows() not applicable with serverSidePagination enabled")},this.refreshData=function(c){return function(){var d;return c.loading(!0),c.filtering(!0),d=a(c.perPage(),c.currentPageNumber(),c.filter(),c.sortDir(),c.sortField()),b(d,function(a,b){var d,e;return c.loading(!1),c.filtering(!1),a?console.log(a):(e=b.total,d=b.results,c.numFilteredRows(e),c.pagedRows(d.map(c.options.resultHandlerFn)))})}}(this)},c.prototype.toggleSort=function(a){return function(b){return function(){return b.currentPageNumber(1),b.sortField()===a?b.sortDir("asc"===b.sortDir()?"desc":"asc"):(b.sortDir("asc"),b.sortField(a))}}(this)},c.prototype.prevPage=function(){var a;return a=this.currentPageNumber(),1!==a?this.currentPageNumber(a-1):void 0},c.prototype.nextPage=function(){var a;return a=this.currentPageNumber(),a!==this.pages().length?this.currentPageNumber(a+1):void 0},c.prototype.gotoPage=function(a){return function(b){return function(){return b.currentPageNumber(a)}}(this)},c.prototype.pageClass=function(a){return e(function(b){return function(){return b.currentPageNumber()===a?"active":void 0}}(this))},c}()}).call(this);
//# sourceMappingURL=knockout-datatable.min.js.map