(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};this.DataTable=function(){function r(t,i){this.getLimitedPages=n(this.getLimitedPages,this);this.getPages=n(this.getPages,this);var r;if(i||(t instanceof Array?i={}:(i=t,t=[])),this.options={recordWord:i.recordWord||"record",recordWordPlural:i.recordWordPlural,sortDir:i.sortDir||"asc",sortField:i.sortField||void 0,perPage:i.perPage||15,paginationLimit:i.paginationLimit||10,filterFn:i.filterFn||void 0,unsortedClass:i.unsortedClass||"",descSortClass:i.descSortClass||"",ascSortClass:i.ascSortClass||""},this.initObservables(),(r=i.serverSidePagination)&&r.enabled){if(!(r.path&&r.loader))throw new Error("`path` or `loader` missing from `serverSidePagination` object");this.options.paginationPath=r.path;this.options.resultHandlerFn=r.loader;this.initWithServerSidePagination()}else this.initWithClientSidePagination(t)}var u,i;return i=ko.pureComputed||ko.computed,u=function(n,t){return t==null?n==null:n!=null?typeof n=="boolean"?n===t:n.toString().toLowerCase().indexOf(t.toString().toLowerCase())>=0||n===t:!1},r.prototype.initObservables=function(){return this.sortDir=ko.observable(this.options.sortDir),this.sortField=ko.observable(this.options.sortField),this.perPage=ko.observable(this.options.perPage),this.currentPageNumber=ko.observable(1),this.filter=ko.observable(""),this.loading=ko.observable(!1),this.rows=ko.observableArray([])},r.prototype.getPages=function(n){var t,u,f,i,r;for(i=this.perPage(),r=0,u=1,f=new Array(Math.ceil(n/i));r<n;)t={number:u,start:r,end:Math.min(n-1,r+i-1)},t.blanks=new Array(f.length>1?i-(t.end-t.start+1):0),f[u-1]=t,u++,r+=i;return f},r.prototype.getLimitedPages=function(){var r,u,f,i,t,n,e;return(n=this.pages(),r=this.currentPageNumber(),t=this.options.paginationLimit,n.length<=t)?n:(i=Math.floor(t/2),u=r-Math.floor(i),u<1)?n.slice(0,t):(e=t%2==0?i-1:i,f=r+e,f>n.length)?n.slice(n.length-t,n.length):n.slice(u-1,f)},r.prototype.initWithClientSidePagination=function(n){var r;return this.filtering=ko.observable(!1),this.filter.subscribe(function(n){return function(){return n.currentPageNumber(1)}}(this)),this.perPage.subscribe(function(n){return function(){return n.currentPageNumber(1)}}(this)),this.rows(n),this.rowAttributeMap=i(function(t){return function(){var r,i,u;if(n=t.rows(),r={},n.length>0){u=n[0];for(i in u)u.hasOwnProperty(i)&&(r[i.toLowerCase()]=i)}return r}}(this)),this.filteredRows=i(function(t){return function(){var i,r;return t.filtering(!0),i=t.filter(),n=t.rows.slice(0),i!==""&&(r=t.filterFn(i),n=n.filter(r)),t.sortField()!=null&&t.sortField()!==""?n.sort(function(n,i){var r,u;return r=ko.utils.unwrapObservable(n[t.sortField()]),u=ko.utils.unwrapObservable(i[t.sortField()]),typeof r=="string"&&(r=r.toLowerCase()),typeof u=="string"&&(u=u.toLowerCase()),t.sortDir()==="asc"?r<u||r===""||r==null?-1:r>u||u===""||u==null?1:0:r<u||r===""||r==null?1:r>u||u===""||u==null?-1:0}):n,t.filtering(!1),n}}(this)).extend({rateLimit:50,method:"notifyWhenChangesStop"}),this.pages=i(function(n){return function(){return n.getPages(n.filteredRows().length)}}(this)),this.limitedPages=i(function(n){return function(){return n.getLimitedPages()}}(this)),this.currentPage=i(function(n){return function(){return n.pages().length>0?n.pages()[n.currentPageNumber()-1]:{number:1,start:0,end:0,blanks:[]}}}(this)),this.pagedRows=i(function(n){return function(){return n.filteredRows().slice(n.currentPage().start,n.currentPage().end+1)}}(this)),this.leftPagerClass=i(function(n){return function(){if(n.currentPageNumber()===1)return"disabled"}}(this)),this.rightPagerClass=i(function(n){return function(){if(n.currentPageNumber()===n.pages().length)return"disabled"}}(this)),this.total=i(function(n){return function(){return n.filteredRows().length}}(this)),this.from=i(function(n){return function(){return n.currentPage().start+1}}(this)),this.to=i(function(n){return function(){return n.currentPage().end+1}}(this)),this.recordsText=i(function(n){return function(){var u,i,r,f,t;return u=n.from(),f=n.to(),t=n.total(),i=n.options.recordWord,r=n.options.recordWordPlural||i+"s",n.pages().length>1?""+u+" to "+f+" of "+t+" "+r:""+t+" "+(t>1||t===0?r:i)}}(this)),this.showNoData=i(function(n){return function(){return n.pagedRows().length===0&&!n.loading()}}(this)),this.showLoading=i(function(n){return function(){return n.loading()}}(this)),this.sortClass=function(n){return function(t){return i(function(){return n.sortField()===t?"sorted "+(n.sortDir()==="asc"?n.options.ascSortClass:n.options.descSortClass):n.options.unsortedClass})}}(this),this.addRecord=function(n){return function(t){return n.rows.push(t)}}(this),this.removeRecord=function(n){return function(t){return n.rows.remove(t),n.pagedRows().length===0?n.prevPage():void 0}}(this),this.replaceRows=function(n){return function(t){return n.rows(t),n.currentPageNumber(1),n.filter(void 0)}}(this),r=function(n,t,i){var r,f;return function(){var n=[];for(r in i)f=i[r],n.push(f);return n}().some(function(i){return u(ko.isObservable(t[i])?t[i]():t[i],n)})},this.filterFn=this.options.filterFn||function(n){return function(i){var f,e,o;return o=[[],{}],f=o[0],e=o[1],i.split(" ").forEach(function(n){var t;return n.indexOf(":")>=0?(t=n.split(":"),e[t[0]]=function(){switch(t[1].toLowerCase()){case"yes":case"true":return!0;case"no":case"false":return!1;case"blank":case"none":case"null":case"undefined":return void 0;default:return t[1].toLowerCase()}}()):f.push(n)}),f=f.join(" "),function(i){var s,o,h;return s=function(){var n=[];for(o in e)h=e[o],n.push(function(n){return function(t,r){var f;return(f=n.rowAttributeMap()[t.toLowerCase()])?u(ko.isObservable(i[f])?i[f]():i[f],r):!1}}(this)(o,h));return n}.call(n),t.call(s,!1)<0&&(f!==""?i.match!=null?i.match(f):r(f,i,n.rowAttributeMap()):!0)}}}(this)},r.prototype.initWithServerSidePagination=function(){var n,t;return t=function(n){return function(t,i){var u,r,f,e;return f=""+n.options.paginationPath+"?"+function(){var n=[];for(u in t)e=t[u],n.push(""+encodeURIComponent(u)+"="+encodeURIComponent(e));return n}().join("&"),r=new XMLHttpRequest,r.open("GET",f,!0),r.setRequestHeader("Content-Type","application/json"),r.onload=function(){return r.status>=200&&r.status<400?i(null,JSON.parse(r.responseText)):i(new Error("Error communicating with server"))},r.onerror=function(){return i(new Error("Error communicating with server"))},r.send()}}(this),n=function(n,t,i,r,u){var f;return f={perPage:n,page:t},i!=null&&i!==""&&(f.filter=i),r!=null&&r!==""&&u!=null&&u!==""&&(f.sortDir=r,f.sortBy=u),f},this.filtering=ko.observable(!1),this.pagedRows=ko.observableArray([]),this.numFilteredRows=ko.observable(0),this.filter.subscribe(function(n){return function(){return n.currentPageNumber(1)}}(this)),this.perPage.subscribe(function(n){return function(){return n.currentPageNumber(1)}}(this)),ko.computed(function(i){return function(){var r;return i.loading(!0),i.filtering(!0),r=n(i.perPage(),i.currentPageNumber(),i.filter(),i.sortDir(),i.sortField()),t(r,function(n,t){var r,u;return(i.loading(!1),i.filtering(!1),n)?console.log(n):(u=t.total,r=t.results,i.numFilteredRows(u),i.pagedRows(r.map(i.options.resultHandlerFn)))})}}(this)).extend({rateLimit:500,method:"notifyWhenChangesStop"}),this.pages=i(function(n){return function(){return n.getPages(n.numFilteredRows())}}(this)),this.limitedPages=i(function(n){return function(){return n.getLimitedPages()}}(this)),this.currentPage=i(function(n){return function(){return n.pages()[n.currentPageNumber()-1]}}(this)),this.pagedRows=i(function(n){return function(){return n.filteredRows().slice(n.currentPage().start,n.currentPage().end+1)}}(this)),this.leftPagerClass=i(function(n){return function(){if(n.currentPageNumber()===1)return"disabled"}}(this)),this.rightPagerClass=i(function(n){return function(){if(n.currentPageNumber()===n.pages().length)return"disabled"}}(this)),this.from=i(function(n){return function(){return n.currentPage().start+1}}(this)),this.to=i(function(n){return function(){return n.currentPage().end+1}}(this)),this.recordsText=i(function(n){return function(){var u,i,r,f,t;return t=n.numFilteredRows(),u=n.from(),f=n.to(),i=n.options.recordWord,r=n.options.recordWordPlural||i+"s",n.pages().length>1?""+u+" to "+f+" of "+t+" "+r:""+t+" "+(t>1||t===0?r:i)}}(this)),this.showNoData=i(function(n){return function(){return n.pagedRows().length===0&&!n.loading()}}(this)),this.showLoading=i(function(n){return function(){return n.loading()}}(this)),this.sortClass=function(n){return function(t){return i(function(){return n.sortField()===t?"sorted "+(n.sortDir()==="asc"?n.options.ascSortClass:n.options.descSortClass):n.options.unsortedClass})}}(this),this.addRecord=function(){throw new Error("#addRecord() not applicable with serverSidePagination enabled");},this.removeRecord=function(){throw new Error("#removeRecord() not applicable with serverSidePagination enabled");},this.replaceRows=function(){throw new Error("#replaceRows() not applicable with serverSidePagination enabled");},this.refreshData=function(i){return function(){var r;return i.loading(!0),i.filtering(!0),r=n(i.perPage(),i.currentPageNumber(),i.filter(),i.sortDir(),i.sortField()),t(r,function(n,t){var r,u;return(i.loading(!1),i.filtering(!1),n)?console.log(n):(u=t.total,r=t.results,i.numFilteredRows(u),i.pagedRows(r.map(i.options.resultHandlerFn)))})}}(this)},r.prototype.toggleSort=function(n){return function(t){return function(){return t.currentPageNumber(1),t.sortField()===n?t.sortDir(t.sortDir()==="asc"?"desc":"asc"):(t.sortDir("asc"),t.sortField(n))}}(this)},r.prototype.prevPage=function(){var n;return n=this.currentPageNumber(),n!==1?this.currentPageNumber(n-1):void 0},r.prototype.nextPage=function(){var n;return n=this.currentPageNumber(),n!==this.pages().length?this.currentPageNumber(n+1):void 0},r.prototype.gotoPage=function(n){return function(t){return function(){return t.currentPageNumber(n)}}(this)},r.prototype.pageClass=function(n){return i(function(t){return function(){if(t.currentPageNumber()===n)return"active"}}(this))},r}()}).call(this);
//# sourceMappingURL=knockout-datatable.min.js.map
