<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>How long to beat Steam</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="Styles/hltbs.min.css">
    <link rel="shortcut icon" href="Resources/Clock.ico">
</head>
<body>
    <div class="modal" id="workingModal" tabindex="-1" role="dialog" aria-hidden="true" aria-labelledby="workingLabel" data-backdrop="static">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-body">
                    <span id="workingLabel" data-bind="text: modelText">Working...</span>
                </div>
            </div>
        </div>
    </div>
    <div class="content">
        <div class="page-header">
            <h1>How Long To Beat Steam</h1>
        </div>
        <form data-bind="submit: howlongClicked" role="form" class="form-inline">
            <div data-bind="css: (badSteamVanityUrlName() ? 'has-error ' : '') + 'has-feedback form-group'">
                <span class="glyphicon glyphicon glyphicon-question-sign"
                      data-placement="bottom"
                      data-toggle="tooltip"
                      title="Your Profile ID is the name that appears at the top of your Steam profile page. In order for this site to work you must make your profile public in Steam's profile settings."></span>
                <label class="control-label sr-only" for="steamIdText">Input with success</label>
                <input type="text" data-bind="value: steamVanityUrlName" placeholder="Profile ID" id="steamIdText" class="form-control">
                <span class="glyphicon glyphicon-remove form-control-feedback" data-bind="visible: badSteamVanityUrlName"></span>
            </div>
            <button id="submit" type="submit" data-bind="enable: !processing()" class="btn btn-primary">Tell me how long</button>
            <img src="http://cdnjs.cloudflare.com/ajax/libs/file-uploader/3.7.0/loading.gif" alt="loading..." data-bind="visible: processing" />
        </form>
        <br />
        <div class="alert alert-danger alert-dismissible" role="alert" data-bind="visible: error() && !errorAlertHidden()">
            <button type="button" class="close" data-bind="click: function () { errorAlertHidden(true); }">
                <span aria-hidden="true">&times;</span>
                <span class="sr-only">Close</span>
            </button>
            <strong>Error</strong> <span data-bind="text: error"></span>
        </div>
        <div class="alert alert-warning alert-dismissible" role="alert" data-bind="visible: partialCache() && !partialCacheAlertHidden()">
            <button type="button" class="close" data-bind="click: function() { partialCacheAlertHidden(true); }">
                <span aria-hidden="true">&times;</span>
                <span class="sr-only">Close</span>
            </button>
            <strong>Warning</strong> Some games haven't been cached by the site's engine yet - please check back later
        </div>
        <div class="alert alert-info alert-dismissible" role="alert" data-bind="visible: total().missingIds && !missingIdsAlertHidden()">
            <button type="button" class="close" data-bind="click: function() { missingIdsAlertHidden(true); }">
                <span aria-hidden="true">&times;</span>
                <span class="sr-only">Close</span>
            </button>
            <strong>Note</strong> Some games are missing their <abbr title="HowLongToBeat">HLTB</abbr> IDs - please locate them on HLTB and update their IDs (embedded in the URL: http://www.howlongtobeat.com/game.php?id=<mark>XXXX</mark>)
        </div>
        <div class="alert alert-success alert-dismissible" role="alert" data-bind="visible: total().imputedCount > 0 && !imputedAlertHidden()">
            <button type="button" class="close" data-bind="click: function() {imputedAlertHidden(true); }">
                <span aria-hidden="true">&times;</span>
                <span class="sr-only">Close</span>  
            </button>
            <strong>Note</strong> Some play times were missing from <abbr title="HowLongToBeat">HLTB</abbr> and were therefore <a href="http://en.wikipedia.org/wiki/Imputation_%28statistics%29" class="alert-link" target="_blank">statistically imputed</a>. Imputed values are <span class="emphasized">italicized</span>.
        </div>
        <div data-bind="with: gameTable, visible: gameTable.rows().length>0 && !processing()">
            <div class="pull-right">
                <strong>Games per page</strong>
                <select data-bind="options: $root.pageSizeOptions, value: perPage"></select>
            </div>
            <strong class="rightMargin">Search</strong>
            <input type="text" data-bind="value: filter, valueUpdate: 'afterkeydown'"/>
            <table class="table table-striped table-hover table-responsive">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" data-bind="click: $root.toggleAll, checked: $root.toggleAllChecked()" />
                        </th>
                        <th class="sortable" unselectable="on" data-bind="click: toggleSort('steamName')">
                            Name
                            <span data-bind="css: sortClass('steamName')" aria-hidden="true"></span>
                        </th>
                        <th class="sortable" unselectable="on" data-bind="click: toggleSort('steamPlaytime')">
                            Playtime
                            <span data-bind="css: sortClass('steamPlaytime')" aria-hidden="true"></span>
                        </th>
                        <th class="sortable" unselectable="on" data-bind="click: toggleSort('hltbMainTtb')">
                            Main
                            <span data-bind="css: sortClass('hltbMainTtb')" aria-hidden="true"></span>
                        </th>
                        <th class="sortable" unselectable="on" data-bind="click: toggleSort('hltbExtrasTtb')">
                            Main + Extras
                            <span data-bind="css: sortClass('hltbExtrasTtb')" aria-hidden="true"></span>
                        </th>
                        <th class="sortable" unselectable="on" data-bind="click: toggleSort('hltbCompletionistTtb')">
                            Completionist
                            <span data-bind="css: sortClass('hltbCompletionistTtb')" aria-hidden="true"></span>
                        </th>
                        <th>HLTB Name</th>
                        <th class="compressed">HLTB ID</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- ko foreach: pagedRows -->
                    <tr data-bind="css: known ? '' : 'info'">
                        <td class="vcenter"><input type="checkbox" data-bind="checked: included" /></td>
                        <td data-bind="css: 'vcenter' + (included() ? '' : ' strikeThrough')">
                            <a data-bind="text:steamName, attr: {href: $data.steamUrl}" target="_blank"></a>
                        </td>
                        <td data-bind="css: 'vcenter' + (included() ? '' : ' strikeThrough'), text: getHours(steamPlaytime) + 'h'"></td>
                        <td data-bind="css: 'vcenter' + (included() ? '' : ' strikeThrough') + (hltbMainTtbImputed ? ' emphasized' : ''), text: getHours($data.hltbMainTtb) + 'h'"></td>
                        <td data-bind="css: 'vcenter' + (included() ? '' : ' strikeThrough') + (hltbExtrasTtbImputed ? ' emphasized' : ''), text: getHours($data.hltbExtrasTtb) + 'h'"></td>
                        <td data-bind="css: 'vcenter' + (included() ? '' : ' strikeThrough') + (hltbCompletionistTtbImputed ? ' emphasized' : ''), text: getHours($data.hltbCompletionistTtb) + 'h'">></td>
                        <td data-bind="css: 'vcenter' + (known ? '' : ' emphasized'), attr: {colspan: $root.allowUpdate($data) ? 1 : 3}">
                            <a data-bind="text: $data.hltbName, attr: {href: $data.hltbUrl}, visible: updatePhase() == GameUpdatePhase.None" target="_blank"></a>
                            <span data-bind="text:$data.hltbName, visible: updatePhase() != GameUpdatePhase.None"></span>
                        </td>
                        <td class="vcenter compressed" data-bind="visible: $root.allowUpdate($data)" colspan="2">
                            <form role="form">
                                <input type="text" class="input-short" data-bind="value:$data.hltbId, valueUpdate:'afterkeydown'" placeholder="?" />
                                <button type="submit" class="btn btn-info btn-sm" data-bind="click: $root.updateHltb, enable: $data.hltbId() != $data.hltbOriginalId">Update ID</button>
                            </form>
                        </td>
                    </tr>
                    <!-- /ko -->
                    <tr class="success">
                        <th data-bind="text: 'Total (' + $root.total().count + ' games)'" colspan="2"></th>
                        <th data-bind="text: numberWithCommas(getHours($root.total().totalPlaytime)) + 'h'"></th>
                        <th data-bind="text: numberWithCommas(getHours($root.total().totalMain)) + 'h'"></th>
                        <th data-bind="text: numberWithCommas(getHours($root.total().totalExtras)) + 'h'"></th>
                        <th data-bind="text: numberWithCommas(getHours($root.total().totalCompletionist)) + 'h'"></th>
                        <th></th>
                        <th></th>
                        <th></th>
                    </tr>
                    <tr class="success">
                        <th colspan="2">
                            Remaining <span class="glyphicon glyphicon-info-sign"
                                            data-placement="right"
                                            data-toggle="tooltip"
                                            data-container="body"
                                            title="For each game, the expected time to beat is subtracted from the time played (to a minimum of zero)"></span>
                        </th>
                        <th></th>
                        <th data-bind="text: numberWithCommas(getHours($root.total().mainRemaining)) + 'h'"></th>
                        <th data-bind="text: numberWithCommas(getHours($root.total().extrasRemaining)) + 'h'"></th>
                        <th data-bind="text: numberWithCommas(getHours($root.total().completionistRemaining)) + 'h'"></th>
                        <th></th>
                        <th></th>
                        <th></th>
                    </tr>
                </tbody>
            </table>
            <div data-bind="visible: pages() > 1">
                <ul class="pagination">
                    <li data-bind="css: leftPagerClass, click: prevPage">
                        <a href="#">&laquo;</a>
                    </li>
                    <!-- ko foreach: {data: (new Array(pages()))} -->
                    <li data-bind="css: $parent.pageClass($index() + 1)">
                        <a href="#" data-bind="text: $index() + 1, click: $parent.gotoPage($index() + 1)"></a>
                    </li>
                    <!-- /ko -->
                    <li data-bind="css: rightPagerClass, click: nextPage">
                        <a href="#">&raquo;</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="footer">
        <a href="https://azure.microsoft.com/" target="_blank">Powered by Azure.</a>
        <a href="http://steampowered.com" target="_blank">Powered by Steam.</a>
        <br />
        Copyright Ohad Schneider &copy; 2014
        <a href="mailto:howlongtobeatsteam@outlook.com?subject=HowLongToBeatSteam">Contact</a>
    </div>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/knockout/3.2.0/knockout-min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/js/tooltip.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/js/modal.min.js"></script>
    <script type="text/javascript" src="Scripts/knockout-datatable.min.js"></script>
    <script type="text/javascript" src="Scripts/app.min.js"></script>
</body>
</html>